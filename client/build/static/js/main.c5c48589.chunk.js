(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,t,a){e.exports=a.p+"static/media/emo.10d77ac4.jpeg"},38:function(e,t,a){e.exports=a.p+"static/media/shore.7121116f.jpeg"},51:function(e,t,a){e.exports=a.p+"static/media/Rocket.cfa70481.gif"},58:function(e,t,a){e.exports=a.p+"static/media/gyal.3af34605.jpeg"},59:function(e,t,a){e.exports=a(94)},64:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var n,r,l,c=a(1),o=a.n(c),s=a(30),m=a.n(s),i=(a(64),a(3)),u=a(10),d=a(2),p=a.n(d),f=a(5),b=a(13),g=a(6),h=a(8),x=a(4),E=a.n(x),v=Object(h.b)("/cloudinary",function(){var e=Object(f.a)(p.a.mark(function e(t){var a,n,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("file",t),a.append("upload_preset","insta_clone"),delete E.a.defaults.headers.common["x-auth-token"],n={headers:{"Content-Type":"application/json"}},"https://api.cloudinary.com/v1_1/duuo1ctgy/image/upload",e.prev=6,e.next=9,E.a.post("https://api.cloudinary.com/v1_1/duuo1ctgy/image/upload",a,n);case 9:return r=e.sent,e.abrupt("return",r.data);case 13:e.prev=13,e.t0=e.catch(6),console.log(e.t0),console.log("Failed to upload");case 17:case"end":return e.stop()}},e,null,[[6,13]])}));return function(t){return e.apply(this,arguments)}}()),w=Object(h.b)("/api/posts",function(){var e=Object(f.a)(p.a.mark(function e(t){var a,n,r,l,c,o,s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},n=function(e){e?E.a.defaults.headers.common["x-auth-token"]=e:delete E.a.defaults.headers.common["x-auth-token"]},localStorage.token&&n(localStorage.token),r=t.title,l=t.body,c=t.link,o=JSON.stringify({title:r,body:l,link:c}),console.log(o),e.prev=6,e.next=9,E.a.post("/api/posts",o,a);case 9:return s=e.sent,e.abrupt("return",s.data);case 13:e.prev=13,e.t0=e.catch(6),console.error(e.t0),console.log("Failed");case 17:case"end":return e.stop()}},e,null,[[6,13]])}));return function(t){return e.apply(this,arguments)}}()),y=Object(h.b)("getposts",Object(f.a)(p.a.mark(function e(){var t,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){e?E.a.defaults.headers.common["x-auth-token"]=e:delete E.a.defaults.headers.common["x-auth-token"]},localStorage.token&&t(localStorage.token),e.prev=2,e.next=5,E.a.get("/api/posts");case 5:return a=e.sent,e.abrupt("return",a.data);case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),console.log("Failed to get posts!");case 13:case"end":return e.stop()}},e,null,[[2,9]])}))),N=Object(h.b)("/likeOrUnlike/:id",function(){var e=Object(f.a)(p.a.mark(function e(t){var a,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("like"!==t.type){e.next=15;break}return e.prev=1,console.log("type liked: from redux"),e.next=5,E.a.put("/api/posts/like/".concat(t.id));case 5:return a=e.sent,e.abrupt("return",a.data);case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),console.log("Failed to like the post!");case 13:e.next=28;break;case 15:if("unlike"!==t.type){e.next=28;break}return e.prev=16,console.log("type unliked: from redux"),e.next=20,E.a.put("/api/posts/unlike/".concat(t.id));case 20:return n=e.sent,e.abrupt("return",n.data);case 24:e.prev=24,e.t1=e.catch(16),console.error(e.t1),console.log("Failed to unlike the post!");case 28:case"end":return e.stop()}},e,null,[[1,9],[16,24]])}));return function(t){return e.apply(this,arguments)}}()),j=Object(h.b)("getLikes",function(){var e=Object(f.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("/api/posts/like/".concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),console.log("Failed to get likes of the post!");case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()),O=Object(h.c)({name:"posts",initialState:{url:"",loading:!1,message:"",post:{},posts:[],alertMessage:"",likesOfPost:null},reducers:{clearAlertMsg:function(e){e.alertMessage=""}},extraReducers:(n={},Object(g.a)(n,v.pending,function(e){e.loading=!0}),Object(g.a)(n,v.fulfilled,function(e){e.message="pic uploaded"}),Object(g.a)(n,w.pending,function(e){e.loading=!0}),Object(g.a)(n,w.fulfilled,function(e,t){e.loading=!1,e.message="Post created",e.alertMessage="Post uploaded",e.post={name:t.payload.name,title:t.payload.title,body:t.payload.body,image:t.payload.image}}),Object(g.a)(n,y.pending,function(e){e.loading=!0}),Object(g.a)(n,y.fulfilled,function(e,t){e.message="posts fetched",e.posts=t.payload.posts,e.user=t.payload.user,e.loading=!1}),Object(g.a)(n,N.fulfilled,function(e,t){e.loading=!1}),Object(g.a)(n,j.fulfilled,function(e,t){e.loading=!1,e.likesOfPost=Object.values(t.payload)}),n)}),k=O.actions.clearAlertMsg,S=(O.reducer,a(19)),C=a(50),_=Object(h.b)("/createcomment",function(){var e=Object(f.a)(p.a.mark(function e(t){var a,n,r,l,c,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=t.comment,r=function(e){e?E.a.defaults.headers.common["x-auth-token"]=e:delete E.a.defaults.headers.common["x-auth-token"]},localStorage.token&&r(localStorage.token),l={headers:{"Content-Type":"application/json"}},c=JSON.stringify(n),e.prev=5,e.next=8,E.a.post("/api/posts/comment/".concat(a.postid),c,l);case 8:return o=e.sent,console.log("Success: Comment added"),e.abrupt("return",o.data);case 13:e.prev=13,e.t0=e.catch(5),console.error(e.t0),console.log("Comment creation failed");case 17:case"end":return e.stop()}},e,null,[[5,13]])}));return function(t){return e.apply(this,arguments)}}()),F=Object(h.b)("/getcomments",function(){var e=Object(f.a)(p.a.mark(function e(t){var a,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){e?E.a.defaults.headers.common["x-auth-token"]=e:delete E.a.defaults.headers.common["x-auth-token"]},localStorage.token&&a(localStorage.token),e.prev=2,e.next=5,E.a.get("/api/posts/comment/".concat(t));case 5:return n=e.sent,e.abrupt("return",n.data);case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),console.log("Get comments failed!");case 13:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t){return e.apply(this,arguments)}}()),L=Object(h.b)("/deletecomment",function(){var e=Object(f.a)(p.a.mark(function e(t){var a,n,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.comment_id.id,n=t.id.p_id,console.log(a,n),e.next=6,E.a.delete("/api/posts/post/".concat(n,"/comment/").concat(a));case 6:return r=e.sent,e.abrupt("return",r.data);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),console.log("Deleting the comment failed!");case 14:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t){return e.apply(this,arguments)}}()),M=Object(h.c)({name:"comments",initialState:{comments:[],loading:!1,message:""},reducers:{},extraReducers:(r={},Object(g.a)(r,_.pending,function(e){e.loading=!0}),Object(g.a)(r,_.fulfilled,function(e,t){e.loading=!1,e.comments=t.payload,e.message="Comment added"}),Object(g.a)(r,F.pending,function(e){e.loading=!0}),Object(g.a)(r,F.fulfilled,function(e,t){e.loading=!1,e.comments=t.payload}),Object(g.a)(r,L.pending,function(e){e.loading=!0}),Object(g.a)(r,L.fulfilled,function(e,t){e.loading=!1,e.message="Comment Deleted!"}),r)}),P=(M.reducer,function(e){var t=e.postid,a=Object(i.b)(),n=Object(c.useState)(""),r=Object(b.a)(n,2),l=r[0],s=r[1],m=Object(c.useState)([]),u=Object(b.a)(m,2),d=u[0],p=u[1],f=Object(c.useRef)(null),g=Object(c.useRef)(),h=new C.a;h.on("emoji",function(e){var t=[].concat(Object(S.a)(l),[e.emoji]).toString().replace(/,/g,"");s(t)});return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"flex items-center justify-start gap-0 mt-3 border-t h-18"},o.a.createElement("div",{className:"w-10 cursor-pointer"},o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",ref:f,onClick:function(){h.pickerVisible?h.hidePicker():h.showPicker(f.current)}},o.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))),o.a.createElement("input",{placeholder:"Add a comment...",onChange:function(e){0===l.length?p("No text. Please write something!"):p(""),s(e.target.value)},value:l,type:"text",ref:g,className:"w-full h-12 mr-1 focus:outline-none"}),o.a.createElement("button",{onClick:function(){0===l.length?console.log("cannot post"):(console.log("posting"),a(_({id:{postid:t},comment:{text:l}})))},className:"mr-3 text-blue-300 focus:outline-none hover:text-blue-500"},"Post")),0!==d.length?o.a.createElement("div",{className:"text-xs text-red-400"},d):"")}),A=a(9),I=function(e){var t=e.image,a=e.name,n=e.title,r=e.body,l=e.postid,s=Object(c.useState)(),m=Object(b.a)(s,2),u=m[0],d=m[1],g=Object(i.c)(function(e){return e.posts.user._id}),h=Object(i.b)(),x=Object(c.useRef)(),E=Object(c.useState)(!1),v=Object(b.a)(E,2),w=v[0],y=v[1],O=Object(c.useState)(),k=Object(b.a)(O,2),S=k[0],C=k[1],_=function(){var e=Object(f.a)(p.a.mark(function e(){var t,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(j(l));case 2:return t=e.sent,a=t.payload,d(a.length),e.abrupt("return",a);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(f.a)(p.a.mark(function e(){var t,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return t=e.sent,a=t.filter(function(e){return e.user.toString()===g}),e.abrupt("return",{likes:t,myLike:a});case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return function(){var e=Object(f.a)(p.a.mark(function e(){var t,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!S){e.next=6;break}return e.next=3,F();case 3:t=e.sent,a=t.myLike,S&&null!==x.current&&(a.length>=1?(x.current.classList.remove("hollow"),x.current.classList.add("filled")):(x.current.classList.remove("filled"),x.current.classList.add("hollow")));case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()(),Object(c.useEffect)(Object(f.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C(!0),!S){e.next=4;break}return e.next=4,_();case 4:return e.abrupt("return",function(){C(!1)});case 5:case"end":return e.stop()}},e)})),[]),o.a.createElement("div",{className:"pb-4 mb-4 border border-gray-200 rounded-sm shadow-sm postcard"},o.a.createElement("div",{className:"px-16 pt-1 border-b top"},o.a.createElement("h4",null,o.a.createElement("strong",null,a)),o.a.createElement("h5",null,o.a.createElement("small",null,n))),o.a.createElement("div",{className:"medium"},o.a.createElement("img",{src:t,alt:"",className:"mx-auto md:mt-2 fill"})),o.a.createElement("div",{className:"pt-2 maincontainer"},o.a.createElement("div",{className:"flex items-center gap-1 ml-3 icons"},o.a.createElement("div",{className:"cursor-pointer ",onClick:function(){Object(f.a)(p.a.mark(function e(){var t,a,n,r,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:if(t=e.sent,a=t.myLike,n=t.likes,0!==a.length){e.next=15;break}return console.log("liking this post now"),r={id:l,type:"like"},e.next=10,h(N(r));case 10:x.current.classList.remove("hollow"),x.current.classList.add("filled"),d(n.length+1),e.next=22;break;case 15:return console.log("unliking now"),c={id:l,type:"unlike"},e.next=19,h(N(c));case 19:x.current.classList.remove("filled"),x.current.classList.add("hollow"),d(n.length-1);case 22:case"end":return e.stop()}},e)}))()}},o.a.createElement("div",{ref:x,className:"w-6 h-6"})),o.a.createElement("div",{className:"cursor-pointer comment",onClick:function(){window.scrollTo(0,window.scrollY+50),y(!w)}},o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},o.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"}))),o.a.createElement("div",{className:"share"},o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-send"},o.a.createElement("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),o.a.createElement("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})))),o.a.createElement("div",{className:"mt-2 ml-3 text-sm font-medium"},"Liked by ",u," people"),o.a.createElement("div",{className:"flex items-center gap-2 mt-3 ml-3 text-sm"},o.a.createElement("strong",null,a),o.a.createElement("p",null,r)),o.a.createElement("div",{className:"ml-4 text-gray-500 "},o.a.createElement(A.b,{to:"/viewcomments/".concat(l)},"View all comments")),o.a.createElement("div",null,w?o.a.createElement(P,{postid:l}):"")))},B=a(51),R=a.n(B),T=function(){return o.a.createElement("div",null,o.a.createElement("img",{src:R.a,alt:""}))},V=function(){var e=Object(i.c)(function(e){return e.posts.posts}),t=Object(i.c)(function(e){return e.posts.loading}),a=Object(i.b)();return Object(c.useEffect)(function(){a(y())},[]),t?o.a.createElement("div",{className:"flex items-center justify-center h-screen "},o.a.createElement(T,null)):o.a.createElement("div",{className:"mx-auto mt-5 maincontainer"},Object.values(e).map(function(e){return o.a.createElement(I,{image:e.image,name:e.name,body:e.body,title:e.title,postid:e._id,lykes:e.likes,key:e._id})}))},z=a(27),J=a(53),U=a(52),W=a(36),D=Object(h.b)("/api/auth",function(){var e=Object(f.a)(p.a.mark(function e(t){var a,n,r,l,c,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},n=t.email,r=t.password,l=JSON.stringify({email:n,password:r}),e.next=5,E.a.post("/api/auth",l,a);case 5:return c=e.sent,o={data:c.data,values:t},e.abrupt("return",o);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),Z=Object(h.b)("getcurrentuser",Object(f.a)(p.a.mark(function e(){var t,a,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={headers:{"Content-Type":"application/json"}},a=function(e){e?E.a.defaults.headers.common["x-auth-token"]=e:delete E.a.defaults.headers.common["x-auth-token"]},localStorage.token&&a(localStorage.token),e.next=6,E.a.get("/api/auth/currentuser",t);case 6:return n=e.sent,e.abrupt("return",n.data);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),console.log("Could not fetch the current user details!");case 14:case"end":return e.stop()}},e,null,[[0,10]])}))),q=Object(h.c)({name:"auth",initialState:{loading:!0,token:localStorage.getItem("token")?localStorage.getItem("token"):"",isAuthenticated:!1,user:localStorage.getItem("user")?localStorage.getItem("user"):"",message:""},reducers:{logoutUser:function(e){localStorage.removeItem("token"),e.isAuthenticated=!1,e.token="",e.loading=!1,e.user={}}},extraReducers:(l={},Object(g.a)(l,D.fulfilled,function(e,t){localStorage.setItem("token",t.payload.data.token),localStorage.setItem("user",JSON.stringify(t.payload.data.user)),e.token=t.payload.data.token,e.isAuthenticated=!0,e.loading=!1}),Object(g.a)(l,Z.fulfilled,function(e,t){e.user=t.payload}),l)}),H=q.actions.logoutUser,G=q.reducer,Y=function(){var e=Object(i.b)(),t=Object(i.c)(function(e){return e.auth.token});return o.a.createElement("nav",{className:"w-full flex items-center justify-between py-3 px-3.5 border-b border-gray-200"},o.a.createElement("div",{className:"text-3xl nav-brand font-grand-hotel "},o.a.createElement(A.b,{to:"/"},"Instagram")),o.a.createElement("ul",{className:"flex items-center gap-4 nav-items "},o.a.createElement("li",{className:"text-xl cursor-pointer nav-item"},o.a.createElement(A.b,{to:"/"}," ",o.a.createElement(z.b,null))),""!==t?o.a.createElement(o.a.Fragment,null,o.a.createElement("li",{className:"mt-1 text-xl cursor-pointer nav-item",onClick:function(){console.log("working"),e(H())}},o.a.createElement(U.a,null)),o.a.createElement("li",{className:"text-xl cursor-pointer nav-item"},o.a.createElement(A.b,{to:"/profile"}," ",o.a.createElement(W.a,null)))):o.a.createElement(o.a.Fragment,null,o.a.createElement("li",{className:"text-xl cursor-pointer nav-item"},o.a.createElement(A.b,{to:"/login"},o.a.createElement(J.a,null))),o.a.createElement("li",{className:"text-xl cursor-pointer nav-item"},o.a.createElement(A.b,{to:"/signup"},o.a.createElement(W.b,null))))))},$=a(28),K=function(){var e=Object(u.g)(),t=Object(i.c)(function(e){return e.auth});Object(c.useEffect)(function(){t.isAuthenticated&&e.push("/")},[t.isAuthenticated]);var a=Object(i.b)(),n=Object($.a)({initialValues:{email:"",password:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Email is required",e.password?e.password.length<6&&(t.password="Must be 6 characters or more"):t.password="Required",t},onSubmit:function(e){a(D(e))}});return o.a.createElement("form",{onSubmit:n.handleSubmit,className:"grid grid-cols-1 mt-4"},o.a.createElement("input",{type:"email",name:"email",id:"email",onChange:n.handleChange,value:n.values.email,className:"form-control",placeholder:"Email"}),n.errors.email?o.a.createElement("div",{className:"w-2/3 mx-auto text-xs text-red-600"},n.errors.email):null,o.a.createElement("input",{type:"password",name:"password",id:"password",onChange:n.handleChange,value:n.values.password,className:"form-control",placeholder:"Password"}),n.errors.password?o.a.createElement("div",{className:"w-2/3 mx-auto text-xs text-red-600"},n.errors.password):null,o.a.createElement("button",{type:"submit",className:"w-3/4 py-1 mx-auto mt-4 text-white bg-blue-300 rounded-sm cursor-pointer hover:bg-instablue-default"},"Login"),o.a.createElement("div",{className:"mt-4 text-center text-gray-500"},"OR"),o.a.createElement("div",{className:"flex items-center justify-center mt-5 font-medium text-blue-900 text-md"},o.a.createElement(z.a,{className:"text-xl"}),o.a.createElement(A.b,{to:"/",className:"text-center"},"Log in with Facebook")),o.a.createElement("div",{className:"mt-3 text-sm text-center text-blue-900"},o.a.createElement(A.b,{to:"/"},"Forgot Password?")))},Q=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"mx-auto mt-8 border border-gray-200 card"},o.a.createElement("h1",{className:"pt-6 text-5xl text-center font-grand-hotel"},"Instagram"),o.a.createElement(K,null)),o.a.createElement("div",{className:"flex items-center justify-center mx-auto mt-3 text-sm border border-gray-200 smallcard"},o.a.createElement("span",{className:"font-light "},"Don't have an account?"),o.a.createElement(A.b,{to:"/signup",className:"ml-2 text-blue-900"},"Signup")))},X=Object(h.b)("/api/users",function(){var e=Object(f.a)(p.a.mark(function e(t){var a,n,r,l,c,o,s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},n=t.name,r=t.email,l=t.password,c=JSON.stringify({name:n,email:r,password:l}),e.next=5,E.a.post("/api/users",c,a);case 5:return o=e.sent,s={msg:o.data.message,values:t},e.abrupt("return",s);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),ee=Object(h.c)({name:"users",initialState:{isAuthenticated:!1,loading:!0,user:{},message:""},reducers:{},extraReducers:Object(g.a)({},X.fulfilled,function(e,t){e.isAuthenticated=!0,e.loading=!1,e.user=t.payload.values,e.message=t.payload.msg})}).reducer,te=function(){var e=Object(i.b)(),t=Object($.a)({initialValues:{name:"",email:"",password:""},validate:function(e){var t={};return e.name?e.name.length>15&&(t.name="Must be 15 characters or less"):t.name="Please enter a name",e.password?e.password.length>20?t.password="Must be 20 characters or less":e.password.length<6&&(t.password="Must be 6 characters or more"):t.password="Please enter a password",e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Please enter a email",t},onSubmit:function(t){e(X(t))}});return o.a.createElement("form",{onSubmit:t.handleSubmit,action:"",className:"grid grid-cols-1 mt-4"},o.a.createElement("input",{type:"email",name:"email",id:"email",onChange:t.handleChange,value:t.values.email,className:"form-control",placeholder:"Email"}),t.errors.email?o.a.createElement("div",{className:"w-2/3 mx-auto text-xs text-red-600"},t.errors.email):null,o.a.createElement("input",{type:"text",name:"name",id:"name",onChange:t.handleChange,value:t.values.name,className:"form-control",placeholder:"Name"}),t.errors.name?o.a.createElement("div",{className:"w-2/3 mx-auto text-xs text-red-600"},t.errors.name):null,o.a.createElement("input",{type:"password",name:"password",id:"password",onChange:t.handleChange,value:t.values.password,className:"form-control",placeholder:"Password"}),t.errors.password?o.a.createElement("div",{className:"w-2/3 mx-auto text-xs text-red-600"},t.errors.password):null,o.a.createElement("button",{type:"submit",className:"w-3/4 py-1 mx-auto mt-4 text-white bg-blue-300 rounded-sm cursor-pointer hover:bg-instablue-default"},"Sign Up"),o.a.createElement("span",{className:"w-3/4 mx-auto mt-4 text-xs font-medium text-center text-gray-500"},"By signing up, you agree to our"," ",o.a.createElement("strong",null," Terms , Data Policy and Cookies Policy .")))},ae=function(){var e=Object(i.c)(function(e){return e.users.message});return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"mx-auto mt-8 border border-gray-200 largecard"},""!==e?o.a.createElement("div",{className:"w-full mt-2 mb-2 text-white bg-blue-500"},e):"",o.a.createElement("h1",{className:"pt-6 text-5xl text-center font-grand-hotel"},"Instagram"),o.a.createElement("h2",{className:"w-3/4 mx-auto mt-4 font-bold text-center text-gray-500 text-md"},"Sign up to see photos and videos from your friends."),o.a.createElement("div",{className:"flex items-center justify-center w-3/4 py-1 mx-auto mt-5 font-medium text-white rounded-sm bg-instablue-default text-md"},o.a.createElement(z.a,{className:"text-xl"}),o.a.createElement(A.b,{to:"/",className:"text-center"},"Log in with Facebook")),o.a.createElement("div",{className:"mt-4 text-center text-gray-500"},"OR"),o.a.createElement(te,{getMsg:function(e){console.log(e)}})),o.a.createElement("div",{className:"flex items-center justify-center mx-auto mt-3 text-sm border border-gray-200 smallcard"},o.a.createElement("span",null,"Have an account?"),o.a.createElement(A.b,{to:"/login",className:"ml-2 text-blue-900"},"Login")))},ne=a(56),re=function(){var e=Object(c.useState)([]),t=Object(b.a)(e,2),a=t[0],n=t[1],r=Object(i.b)(),l=function(){var e=Object(f.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.files[0],console.log("originalFile instanceof Blob",a instanceof Blob),console.log("originalFile size ".concat(a.size/1024/1024," MB")),n(a);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),s=Object($.a)({initialValues:{file:"",title:"",body:""},validate:function(e){var t={};return e.title||(t.title="Title is required"),e.body||(t.body="Caption is required"),0===a.length&&(t.file="Please select a pic"),t},onSubmit:function(e){Object(f.a)(p.a.mark(function t(){var n,l,c,o,s,m;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Compression started"),n={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0},t.prev=2,t.next=5,Object(ne.a)(a,n);case 5:l=t.sent,console.log("compressedFile instanceof Blob",l instanceof Blob),console.log("compressedFile size ".concat(l.size/1024/1024," MB")),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:return console.log("Compressed"),console.log(l),t.next=17,r(v(l));case 17:c=t.sent,o=c.payload.secure_url,console.log("Uploaded to Cloudinary"),s=e.title,m=e.body,r(w({title:s,body:m,link:o}));case 23:case"end":return t.stop()}},t,null,[[2,10]])}))()}});return o.a.createElement("form",{onSubmit:s.handleSubmit},o.a.createElement("h1",{className:"pt-6 text-5xl text-center font-grand-hotel"},"New Post"),o.a.createElement("div",{className:"text-center"},o.a.createElement("input",{type:"text",name:"title",id:"title",placeholder:"Enter a title",onChange:s.handleChange,value:s.values.title,className:"form-control"}),s.errors.title?o.a.createElement("div",{className:"w-2/3 mx-auto text-xs text-left text-red-600"},s.errors.title):null,o.a.createElement("input",{type:"text",name:"body",id:"body",placeholder:"Enter a caption",onChange:s.handleChange,value:s.values.body,className:"form-control"}),s.errors.body?o.a.createElement("div",{className:"w-2/3 mx-auto text-xs text-left text-red-600"},s.errors.body):null,o.a.createElement("input",{type:"file",name:"file",accept:"image/*",id:"file",onChange:l,className:"form-control"}),s.errors.file?o.a.createElement("div",{className:"w-2/3 mx-auto text-xs text-left text-red-600"},s.errors.file):null,o.a.createElement("button",{type:"submit",className:"w-3/4 py-1 mx-auto mt-4 text-white bg-blue-300 rounded-sm cursor-pointer hover:bg-instablue-default"},"Upload")))},le=function(){var e=Object(i.b)(),t=Object(i.c)(function(e){return e.posts.loading}),a=Object(c.useRef)(null),n=Object(i.c)(function(e){return e.posts.alertMessage});console.log(t);return Object(c.useEffect)(function(){window.scroll(0,0)},[]),t?o.a.createElement("div",{className:"flex items-center justify-center h-full "},o.a.createElement(T,null)):o.a.createElement("div",{className:"h-screen "},o.a.createElement("div",{className:"mx-auto mt-8 border border-gray-200 card"},""!==n?o.a.createElement("div",{ref:a,className:"py-4 text-center text-white bg-blue-300"},n," ",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;setTimeout(function(){null!==e.current&&(e.current.style.display="none")},t)}(a),void setTimeout(function(){e(k())},2e3)):"",o.a.createElement(re,null)))},ce=a(57),oe=function(){return o.a.createElement("div",{className:"sticky bottom-0 flex items-center justify-center object-bottom w-full h-12 bg-white border-t "},o.a.createElement(A.b,{to:"/add_post",className:"text-3xl"},o.a.createElement(ce.a,null)))},se=function(e){var t=e.name,a=e.text,n=e.p_id,r=e.id,l=Object(i.c)(function(e){return e.auth.user}),c=Object(i.c)(function(e){return e.comments.loading}),s=Object(i.b)();return c?o.a.createElement("div",{className:"flex items-center justify-center h-screen mb-16 "},o.a.createElement(T,null)):o.a.createElement("div",{className:"flex items-start mx-2 mb-3 md:mx-8 md:my-10 md:mb-8 align-center"},o.a.createElement("h4",{className:"mr-3"},o.a.createElement("strong",null,t)),o.a.createElement("div",{className:"grid grid-cols-2 gap-0"},o.a.createElement("p",null,a),t===l.name?o.a.createElement("button",{onClick:function(){s(L({id:{p_id:n},comment_id:{id:r}}))},className:"w-12 ml-4 text-white bg-blue-300 hover:bg-instablue-default"},o.a.createElement("small",null,"Delete")):""))},me=function(e){var t=Object(i.b)(),a=e.match.params.id,n=Object(i.c)(function(e){return e.comments}),r=n.comments,l=n.loading,s=Object(c.useState)([]),m=Object(b.a)(s,2)[1];return Object(c.useEffect)(function(){t(F(a))},[t]),Object(c.useEffect)(function(){window.scroll(0,0),m(r)},[r]),l?o.a.createElement("div",{className:"flex items-center justify-center h-screen "},o.a.createElement(T,null)):o.a.createElement("div",{className:"h-screen md:max-w-xs md:mx-auto "},o.a.createElement("div",{className:"mt-3 md:border min-h-46"},r.map(function(e){return o.a.createElement(se,{name:e.name,text:e.text,p_id:a,id:e._id,key:e.text})})))},ie=a(37),ue=a.n(ie),de=a(58),pe=a.n(de),fe=a(38),be=a.n(fe),ge=function(){var e=Object(i.b)();Object(c.useEffect)(function(){e(Z())},[]);var t=Object(i.c)(function(e){return e.auth.user}),a=t.name,n=t.username,r=t.bio;return o.a.createElement("div",{className:"min-h-screen"},o.a.createElement("div",{className:"grid grid-cols-3 px-4 mt-10 sm:grid-cols-6 name_section md:items-start md:grid-cols-9 md:h-12"},o.a.createElement("div",{className:"w-full col-start-1 col-end-2 image md:col-end-3"},o.a.createElement("img",{src:be.a,alt:"",className:"w-20 h-20 rounded-full md:w-32 md:h-32"})),o.a.createElement("div",{className:"col-span-2 col-end-4 edit sm:col-start-2 sm:col-end-7 md:flex md:items-center md:gap-6 md:col-start-3"},o.a.createElement("div",{className:"text-xl name md:text-2xl"}," ",n),o.a.createElement("div",{className:"mt-4 edit_profile md:mt-0 "},o.a.createElement("button",{className:"w-full border rounded-sm md:px-3 font-regular md:min-w-1/5 md:max-w-2/5"},o.a.createElement(A.b,{to:"/editprofile"}," Edit Profile"))))),o.a.createElement("div",{className:"items-center hidden py-4 mt-6 text-center border-t border-b md:flex showcase_section md:w-1/3 md:ml-48 md:py-2 md:border-0 md:mt-2 md:mb-4 lg:pl-2 xl:ml-60 2xl:ml-72 2xl:pl-0"},o.a.createElement("div",{className:"w-1/3 posts"},o.a.createElement("strong",null," 30"),o.a.createElement("br",null),"posts"),o.a.createElement("div",{className:"w-1/3 followers"},o.a.createElement("strong",null," 65"),o.a.createElement("br",null),"followers"),o.a.createElement("div",{className:"w-1/3 following"},o.a.createElement("strong",null," 61"),o.a.createElement("br",null),"following")),o.a.createElement("div",{className:"px-4 mt-4 xl:w-2/3 info_section md:ml-52 md:mt-0 lg:ml-52 lg:pl-6 xl:ml-64 xl:pl-8 2xl:ml-80 2xl:pl-6"},o.a.createElement("div",{className:"name"},o.a.createElement("strong",null,a)," "),o.a.createElement("div",{className:"about"},r)),o.a.createElement("div",{className:"flex items-center py-4 mt-6 text-center border-t border-b showcase_section md:hidden"},o.a.createElement("div",{className:"w-1/3 posts"},o.a.createElement("strong",null," 30"),o.a.createElement("br",null),"posts"),o.a.createElement("div",{className:"w-1/3 followers"},o.a.createElement("strong",null," 65"),o.a.createElement("br",null),"followers"),o.a.createElement("div",{className:"w-1/3 following"},o.a.createElement("strong",null," 61"),o.a.createElement("br",null),"following")),o.a.createElement("div",{className:"grid grid-cols-3 gap-1 images-section md:mt-32 md:h-80 md:grid-cols-4 "},o.a.createElement("div",{className:"img-compt"},o.a.createElement("img",{src:ue.a,alt:"",className:"md:h-80"})),o.a.createElement("div",{className:"img-compt"},o.a.createElement("img",{src:pe.a,alt:"",className:"md:h-80"})),o.a.createElement("div",{className:"img-compt"},o.a.createElement("img",{src:be.a,alt:"",className:"md:h-80"})),o.a.createElement("div",{className:"img-compt"},o.a.createElement("img",{src:ue.a,alt:"",className:"md:h-80"}))))},he=a(25),xe=Object(h.b)("/updateprofile",function(){var e=Object(f.a)(p.a.mark(function e(t){var a,n,r,l,c,o,s,m,i,u,d,f;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t._id,n=t.name,r=t.email,l=t.username,c=t.bio,o=t.gender,s=t.website,m=t.phone,i=JSON.stringify({name:n,email:r,username:l,bio:c,website:s,gender:o,phone:m}),u={headers:{"Content-Type":"application/json"}},d=function(e){e?E.a.defaults.headers.common["x-auth-token"]=e:delete E.a.defaults.headers.common["x-auth-token"]},localStorage.token&&d(localStorage.token),e.next=8,E.a.patch("/api/auth/editprofile/".concat(a),i,u);case 8:return f=e.sent,e.abrupt("return",f.data);case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),console.log("Failed to update the profile");case 16:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()),Ee=Object(h.c)({name:"profile",initialState:{loading:!1,message:"",response:{}},reducers:{},extraReducers:Object(g.a)({},xe.fulfilled,function(e,t){})}),ve=(Ee.reducer,function(){var e=Object(i.b)(),t=Object(u.g)();Object(c.useEffect)(function(){e(Z())},[]);var a=Object(i.c)(function(e){return e.auth.user}),n=a.name,r=a.phone,l=a.profilepic,s=a.email,m=a.username,d=a.website,h=a.bio,x=a.gender,E=a._id,v=Object(c.useState)({}),w=Object(b.a)(v,2),y=w[0],N=w[1],j=Object(c.useState)({}),O=Object(b.a)(j,2),k=O[0],S=O[1],C=function(e){N(Object(he.a)({},y,Object(g.a)({},e.target.name,e.target.value)))},_=function(){var n=Object(f.a)(p.a.mark(function n(){var r,l;return p.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(l=function(){for(var e in r)void 0===r[e]&&(r=Object(he.a)({},r,Object(g.a)({},e,a[e])))},r={name:y.name,email:y.email,username:y.username,bio:y.bio,website:y.website,gender:y.gender,phone:y.phone},""===y.name?(k.name="Name cannot be empty",S(Object(he.a)({},k))):(k.name="",S(Object(he.a)({},k))),""===y.email?(k.email="Email cannot be empty",S(Object(he.a)({},k))):(k.email="",S(Object(he.a)({},k))),""!==k.name||""!==k.email){n.next=11;break}return l(),r=Object(he.a)({},r,{_id:E}),n.next=8,e(xe(r));case 8:t.push("/profile"),n.next=12;break;case 11:console.log("Cant proceed");case 12:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}();return o.a.createElement("div",{className:"min-h-screen pt-6 mt-8 border-t md:border-t-0 md:w-2/3 md:mx-auto"},o.a.createElement("div",{className:"grid items-center grid-cols-9 image_editing "},o.a.createElement("div",{className:"px-3 image"},o.a.createElement("img",{src:l,alt:"",className:"w-10 h-10 rounded-full"})),o.a.createElement("div",{className:"col-start-2 col-end-11 name"},o.a.createElement("p",{className:"text-lg"}," shakran._.bhat"),o.a.createElement("button",{className:"text-sm font-medium text-instablue-default"},"Change Profile Picture"))),o.a.createElement("div",{className:"w-3/4 "},o.a.createElement("div",{className:"grid grid-cols-1 mx-4 mt-8 name_edit md:grid-cols-6"},o.a.createElement("label",{htmlFor:"name",className:"font-medium text-md md:col-start-1 md:col-end-2"},"Name"),o.a.createElement("input",{type:"text",name:"name",defaultValue:n,onChange:C,className:"py-1 border md:col-start-2 md:col-end-7"}),k.name&&k.name.length>0?o.a.createElement("div",{className:"text-xs text-red-500"},k.name):"",o.a.createElement("p",{className:"mt-4 leading-3 text-gray-500 md:col-start-1 md:col-end-7"},o.a.createElement("small",null,"Help people discover your account by using the name you're known by: either your full name, nickname, or business name.",o.a.createElement("br",null),"You can only change your name twice within 14 days."))),o.a.createElement("div",{className:"grid grid-cols-1 mx-4 mt-8 name_edit md:grid-cols-6 md:gap-x-20"},o.a.createElement("label",{htmlFor:"username",className:"font-medium text-md md:col-start-1 md:col-end-2"},"Username"),o.a.createElement("input",{type:"text",name:"username",defaultValue:m,onChange:C,className:"py-1 border md:col-start-2 md:col-end-7"}),o.a.createElement("p",{className:"mt-4 leading-3 text-gray-500 md:col-start-1 md:col-end-7"},o.a.createElement("small",null,"In most cases, you'll be able to change your username back to shakran._.bhat for another 14 days. Learn More"))),o.a.createElement("div",{className:"grid grid-cols-1 mx-4 mt-8 name_edit md:grid-cols-6"},o.a.createElement("label",{htmlFor:"webiste",className:"font-medium text-md md:col-start-1 md:col-end-2"},"Website"),o.a.createElement("input",{type:"text",name:"website",defaultValue:d,onChange:C,className:"py-1 border md:col-start-2 md:col-end-7"})),o.a.createElement("div",{className:"grid grid-cols-1 mx-4 mt-8 name_edit md:grid-cols-6"},o.a.createElement("label",{htmlFor:"bio",className:"font-medium text-md md:col-start-1 md:col-end-2"},"Bio"),o.a.createElement("textarea",{name:"bio",defaultValue:h,onChange:C,className:"py-1 border md:col-start-2 md:col-end-7"})),o.a.createElement("div",{className:"grid grid-cols-1 mx-4 mt-8 name_edit"},o.a.createElement("h3",{className:"text-gray-500 "},"Personal Information"),o.a.createElement("p",{className:"mt-2 leading-3 text-gray-500 md:col-start-1 md:col-end-7"},o.a.createElement("small",null,"Provide your personal information, even if the account is used for a business, a pet or something else. This won't be a part of your public profile."))),o.a.createElement("div",{className:"grid grid-cols-1 gap-2 mx-4 mt-8 name_edit md:grid-cols-6 md:items-center"},o.a.createElement("label",{htmlFor:"email",className:"font-medium text-md md:col-start-1 md:col-end-2"},"Email"),o.a.createElement("input",{type:"text",name:"email",defaultValue:s,onChange:C,className:"py-1 border md:col-start-2 md:col-end-7"}),k.email&&k.email.length>0?o.a.createElement("div",{className:"text-xs text-red-500"},k.email):"",o.a.createElement("label",{htmlFor:"phone",className:"mt-3 font-medium text-md md:col-start-1 md:col-end-2"},"Phone Number"),o.a.createElement("input",{type:"text",name:"phone",defaultValue:r,onChange:C,className:"py-1 border md:h-2/3 md:col-start-2 md:col-end-7"}),o.a.createElement("label",{htmlFor:"gender",className:"mt-3 font-medium text-md md:col-start-1 md:col-end-2"},"Gender"),o.a.createElement("input",{type:"text",name:"gender",defaultValue:x,onChange:C,className:"py-1 border md:col-start-2 md:col-end-7"})),o.a.createElement("div",{className:"mx-4 mt-8 mb-3 name_edit md:grid-cols-6"},o.a.createElement("button",{onClick:_,className:"px-3 py-1 text-sm font-medium text-white bg-blue-300 rounded"},"Submit"))))});var we=function(){var e;return""!==Object(i.c)(function(e){return e.auth}).token?e=!0:(e=!1,console.log("not auth")),o.a.createElement("div",{className:"mx-auto App lg:container"},o.a.createElement(Y,null),o.a.createElement(u.d,null,o.a.createElement(u.b,{exact:!0,path:"/",render:function(){return e?o.a.createElement(V,null):o.a.createElement(Q,null)}}),o.a.createElement(u.b,{path:"/login",render:function(){return e?o.a.createElement(u.a,{to:"/"}):o.a.createElement(Q,null)}}),o.a.createElement(u.b,{path:"/signup",component:ae}),o.a.createElement(u.b,{path:"/add_post",render:function(){return e?o.a.createElement(le,null):o.a.createElement(u.a,{to:"/login"})}}),o.a.createElement(u.b,{path:"/viewcomments/:id",render:function(t){return e?o.a.createElement(me,t):o.a.createElement(u.a,{to:"/login"})}}),o.a.createElement(u.b,{path:"/profile",render:function(t){return e?o.a.createElement(ge,t):o.a.createElement(u.a,{to:"/login"})}}),o.a.createElement(u.b,{path:"/editprofile",render:function(t){return e?o.a.createElement(ve,t):o.a.createElement(u.a,{to:"/login"})}})),e?o.a.createElement(oe,null):"")},ye=Object(h.a)({reducer:{users:ee,auth:G,posts:O.reducer,comments:M.reducer,profile:Ee.reducer},customizedMiddleware:Object(h.d)({serializableCheck:!1})});m.a.render(o.a.createElement(A.a,null,o.a.createElement(i.a,{store:ye},o.a.createElement(we,null))),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.c5c48589.chunk.js.map