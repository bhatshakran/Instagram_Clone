(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{53:function(e,t,a){e.exports=a.p+"static/media/Rocket.cfa70481.gif"},55:function(e,t,a){e.exports=a(90)},60:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var n,r,l=a(1),o=a.n(l),c=a(29),s=a.n(c),i=(a(60),a(3)),u=a(5),m=a(2),d=a.n(m),p=a(6),f=a(18),b=a(11),g=a(8),x=a(9),h=a.n(x),v=Object(g.b)("/cloudinary",function(){var e=Object(p.a)(d.a.mark(function e(t){var a,n,r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("file",t),a.append("upload_preset","insta_clone"),delete h.a.defaults.headers.common["x-auth-token"],n={headers:{"Content-Type":"application/json"}},"https://api.cloudinary.com/v1_1/duuo1ctgy/image/upload",e.prev=6,e.next=9,h.a.post("https://api.cloudinary.com/v1_1/duuo1ctgy/image/upload",a,n);case 9:return r=e.sent,e.abrupt("return",r.data);case 13:e.prev=13,e.t0=e.catch(6),console.log(e.t0),console.log("Failed to upload");case 17:case"end":return e.stop()}},e,null,[[6,13]])}));return function(t){return e.apply(this,arguments)}}()),E=Object(g.b)("/api/posts",function(){var e=Object(p.a)(d.a.mark(function e(t){var a,n,r,l,o,c,s;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},n=function(e){e?h.a.defaults.headers.common["x-auth-token"]=e:delete h.a.defaults.headers.common["x-auth-token"]},localStorage.token&&n(localStorage.token),r=t.title,l=t.body,o=t.link,c=JSON.stringify({title:r,body:l,link:o}),console.log(c),e.prev=6,e.next=9,h.a.post("/api/posts",c,a);case 9:return s=e.sent,e.abrupt("return",s.data);case 13:e.prev=13,e.t0=e.catch(6),console.error(e.t0),console.log("Failed");case 17:case"end":return e.stop()}},e,null,[[6,13]])}));return function(t){return e.apply(this,arguments)}}()),w=Object(g.b)("getposts",Object(p.a)(d.a.mark(function e(){var t,a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){e?h.a.defaults.headers.common["x-auth-token"]=e:delete h.a.defaults.headers.common["x-auth-token"]},localStorage.token&&t(localStorage.token),e.prev=2,e.next=5,h.a.get("/api/posts");case 5:return a=e.sent,e.abrupt("return",a.data);case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),console.log("Failed to get posts!");case 13:case"end":return e.stop()}},e,null,[[2,9]])}))),y=Object(g.b)("/likeOrUnlike/:id",function(){var e=Object(p.a)(d.a.mark(function e(t){var a,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("like"!==t.type){e.next=15;break}return e.prev=1,console.log("type liked: from redux"),e.next=5,h.a.put("/api/posts/like/".concat(t.id));case 5:return a=e.sent,e.abrupt("return",a.data);case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),console.log("Failed to like the post!");case 13:e.next=28;break;case 15:if("unlike"!==t.type){e.next=28;break}return e.prev=16,console.log("type unliked: from redux"),e.next=20,h.a.put("/api/posts/unlike/".concat(t.id));case 20:return n=e.sent,e.abrupt("return",n.data);case 24:e.prev=24,e.t1=e.catch(16),console.error(e.t1),console.log("Failed to unlike the post!");case 28:case"end":return e.stop()}},e,null,[[1,9],[16,24]])}));return function(t){return e.apply(this,arguments)}}()),j=Object(g.b)("getLikes",function(){var e=Object(p.a)(d.a.mark(function e(t){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("/api/posts/like/".concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),console.log("Failed to get likes of the post!");case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()),k=Object(g.c)({name:"posts",initialState:{url:"",loading:!1,message:"",post:{},posts:[],alertMessage:"",likesOfPost:null},reducers:{clearAlertMsg:function(e){e.alertMessage=""}},extraReducers:(n={},Object(b.a)(n,v.pending,function(e){e.loading=!0}),Object(b.a)(n,v.fulfilled,function(e){e.message="pic uploaded"}),Object(b.a)(n,E.pending,function(e){e.loading=!0}),Object(b.a)(n,E.fulfilled,function(e,t){e.loading=!1,e.message="Post created",e.alertMessage="Post uploaded",e.post={name:t.payload.name,title:t.payload.title,body:t.payload.body,image:t.payload.image}}),Object(b.a)(n,w.fulfilled,function(e,t){e.message="posts fetched",e.posts=t.payload.posts,e.user=t.payload.user}),Object(b.a)(n,y.fulfilled,function(e,t){e.loading=!1}),Object(b.a)(n,j.fulfilled,function(e,t){e.loading=!1,e.likesOfPost=Object.values(t.payload)}),n)}),O=k.actions.clearAlertMsg,N=(k.reducer,a(19)),C=a(47),S=Object(g.b)("/createcomment",function(){var e=Object(p.a)(d.a.mark(function e(t){var a,n,r,l,o,c;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=t.comment,r=function(e){e?h.a.defaults.headers.common["x-auth-token"]=e:delete h.a.defaults.headers.common["x-auth-token"]},localStorage.token&&r(localStorage.token),l={headers:{"Content-Type":"application/json"}},o=JSON.stringify(n),e.prev=5,e.next=8,h.a.post("/api/posts/comment/".concat(a.postid),o,l);case 8:return c=e.sent,console.log("Success: Comment added"),e.abrupt("return",c.data);case 13:e.prev=13,e.t0=e.catch(5),console.error(e.t0),console.log("Comment creation failed");case 17:case"end":return e.stop()}},e,null,[[5,13]])}));return function(t){return e.apply(this,arguments)}}()),L=Object(g.b)("/getcomments",function(){var e=Object(p.a)(d.a.mark(function e(t){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("/api/posts/comment/".concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),console.log("Get comments failed!");case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()),M=Object(g.c)({name:"comments",initialState:{comments:[],loading:!0,message:""},reducers:{},extraReducers:(r={},Object(b.a)(r,S.fulfilled,function(e,t){e.loading=!1,e.comments=t.payload,e.message="Comment added"}),Object(b.a)(r,L.fulfilled,function(e,t){e.loading=!1,e.comments=t.payload}),r)}),F=(M.reducer,function(e){var t=e.postid,a=Object(i.b)(),n=Object(l.useState)(""),r=Object(f.a)(n,2),c=r[0],s=r[1],u=Object(l.useState)([]),m=Object(f.a)(u,2),d=m[0],p=m[1],b=Object(l.useRef)(null),g=Object(l.useRef)(),x=new C.a;x.on("emoji",function(e){g.current.value+=e.emoji;var t=[].concat(Object(N.a)(c),[e.emoji]).toString().replace(/,/g,"");s(t)});return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"flex items-center justify-start gap-0 mt-3 border-t h-18"},o.a.createElement("div",{className:"w-10 cursor-pointer"},o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",ref:b,onClick:function(){x.pickerVisible?x.hidePicker():x.showPicker(b.current)}},o.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))),o.a.createElement("input",{placeholder:"Add a comment...",onChange:function(e){0===c.length?p("No text. Please write something!"):p(""),s(e.target.value)},value:c,type:"text",ref:g,className:"w-full h-12 mr-1 focus:outline-none"}),o.a.createElement("button",{onClick:function(){0===c.length?console.log("cannot post"):(console.log("posting"),a(S({id:{postid:t},comment:{text:c}})))},className:"pr-2 text-blue-300 focus:outline-none hover:text-blue-500"},"Post")),0!==d.length?o.a.createElement("div",{className:"text-xs text-red-400"},d):"")}),P=a(7),A=function(e){var t=e.image,a=e.name,n=e.title,r=e.body,c=e.postid,s=Object(l.useState)(),u=Object(f.a)(s,2),m=u[0],b=u[1],g=Object(i.c)(function(e){return e.posts.user._id}),x=Object(i.b)(),h=Object(l.useRef)(),v=Object(l.useState)(!1),E=Object(f.a)(v,2),w=E[0],k=E[1],O=function(){var e=Object(p.a)(d.a.mark(function e(){var t,a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(j(c));case 2:return t=e.sent,a=t.payload,b(a.length),e.abrupt("return",a);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(p.a)(d.a.mark(function e(){var t,a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:return t=e.sent,a=t.filter(function(e){return e.user.toString()===g}),e.abrupt("return",{likes:t,myLike:a});case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return function(){var e=Object(p.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:e.sent.myLike.length>=1?(h.current.classList.remove("hollow"),h.current.classList.add("filled")):(h.current.classList.remove("filled"),h.current.classList.add("hollow"));case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()(),Object(l.useEffect)(function(){O()},[]),o.a.createElement("div",{className:"pb-4 mb-4 border border-gray-200 rounded-sm shadow-sm postcard"},o.a.createElement("div",{className:"px-16 pt-1 border-b top"},o.a.createElement("h4",null,o.a.createElement("strong",null,a)),o.a.createElement("h5",null,o.a.createElement("small",null,n))),o.a.createElement("div",{className:"medium"},o.a.createElement("img",{src:t,alt:"",className:"mx-auto my-2 fill"})),o.a.createElement("div",{className:"pt-2 maincontainer"},o.a.createElement("div",{className:"flex items-center gap-1 ml-3 icons"},o.a.createElement("div",{className:"cursor-pointer ",onClick:function(){Object(p.a)(d.a.mark(function e(){var t,a,n,r,l;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:if(t=e.sent,a=t.myLike,n=t.likes,0!==a.length){e.next=15;break}return console.log("liking this post now"),r={id:c,type:"like"},e.next=10,x(y(r));case 10:h.current.classList.remove("hollow"),h.current.classList.add("filled"),b(n.length+1),e.next=22;break;case 15:return console.log("unliking now"),l={id:c,type:"unlike"},e.next=19,x(y(l));case 19:h.current.classList.remove("filled"),h.current.classList.add("hollow"),b(n.length-1);case 22:case"end":return e.stop()}},e)}))()}},o.a.createElement("div",{ref:h,className:"w-6 h-6"})),o.a.createElement("div",{className:"cursor-pointer comment",onClick:function(){k(!w)}},o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},o.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"}))),o.a.createElement("div",{className:"share"},o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-send"},o.a.createElement("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),o.a.createElement("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})))),o.a.createElement("div",{className:"mt-2 ml-3 text-sm font-medium"},"Liked by ",m," people"),o.a.createElement("div",{className:"flex items-center gap-2 mt-3 ml-3 text-sm"},o.a.createElement("strong",null,a),o.a.createElement("p",null,r)),o.a.createElement("div",{className:"ml-4 text-gray-500 "},o.a.createElement(P.b,{to:"/viewcomments/".concat(c)},"View all comments")),o.a.createElement("div",null,o.a.createElement("div",{className:"flex items-center gap-1 ml-3 text-sm name"},o.a.createElement("strong",null,"v.lee87"),o.a.createElement("p",null,"Cool pic")),o.a.createElement("div",{className:"flex items-center gap-1 ml-3 text-sm name"},o.a.createElement("strong",null,"ra_one1"),o.a.createElement("p",null,"Maddd!!!!")),w?o.a.createElement(F,{postid:c}):"")))},_=function(){var e=Object(i.c)(function(e){return e.posts.posts});console.log(Object.values(e));var t=Object(i.b)();return Object(l.useEffect)(function(){t(w())},[]),o.a.createElement("div",{className:"mx-auto mt-5 maincontainer"},Object.values(e).map(function(e){return o.a.createElement(A,{image:e.image,name:e.name,body:e.body,title:e.title,postid:e._id,lykes:e.likes,key:e._id})}))},B=a(26),R=a(49),I=a(48),z=a(35),T=Object(g.b)("/api/auth",function(){var e=Object(p.a)(d.a.mark(function e(t){var a,n,r,l,o,c;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},n=t.email,r=t.password,l=JSON.stringify({email:n,password:r}),e.next=5,h.a.post("/api/auth",l,a);case 5:return o=e.sent,c={data:o.data,values:t},e.abrupt("return",c);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),J=Object(g.c)({name:"auth",initialState:{loading:!0,token:localStorage.getItem("token")?localStorage.getItem("token"):"",isAuthenticated:!1,user:{},message:""},reducers:{logoutUser:function(e){localStorage.removeItem("token"),e.isAuthenticated=!1,e.token="",e.loading=!1,e.user={}}},extraReducers:Object(b.a)({},T.fulfilled,function(e,t){localStorage.setItem("token",t.payload.data.token),e.token=t.payload.data.token,e.isAuthenticated=!0,e.loading=!1,e.user=t.payload.values})}),U=J.actions.logoutUser,W=J.reducer,Z=function(){var e=Object(i.b)(),t=Object(i.c)(function(e){return e.auth.token});return o.a.createElement("nav",{className:"w-full flex items-center justify-between py-3 px-3.5 border-b border-gray-200"},o.a.createElement("div",{className:"text-3xl nav-brand font-grand-hotel "},o.a.createElement(P.b,{to:"/"},"Instagram")),o.a.createElement("ul",{className:"flex items-center gap-4 nav-items "},o.a.createElement("li",{className:"text-xl cursor-pointer nav-item"},o.a.createElement(P.b,{to:"/"}," ",o.a.createElement(B.b,null))),""!==t?o.a.createElement(o.a.Fragment,null,o.a.createElement("li",{className:"mt-1 text-xl cursor-pointer nav-item",onClick:function(){console.log("working"),e(U())}},o.a.createElement(I.a,null)),o.a.createElement("li",{className:"text-xl cursor-pointer nav-item"},o.a.createElement(P.b,{to:"/profile"}," ",o.a.createElement(z.a,null)))):o.a.createElement(o.a.Fragment,null,o.a.createElement("li",{className:"text-xl cursor-pointer nav-item"},o.a.createElement(P.b,{to:"/login"},o.a.createElement(R.a,null))),o.a.createElement("li",{className:"text-xl cursor-pointer nav-item"},o.a.createElement(P.b,{to:"/signup"},o.a.createElement(z.b,null))))))},V=a(27),q=function(){var e=Object(u.g)(),t=Object(i.c)(function(e){return e.auth});Object(l.useEffect)(function(){t.isAuthenticated&&e.push("/")},[t.isAuthenticated]);var a=Object(i.b)(),n=Object(V.a)({initialValues:{email:"",password:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Email is required",e.password?e.password.length<6&&(t.password="Must be 6 characters or more"):t.password="Required",t},onSubmit:function(e){a(T(e))}});return o.a.createElement("form",{onSubmit:n.handleSubmit,className:"grid grid-cols-1 mt-4"},o.a.createElement("input",{type:"email",name:"email",id:"email",onChange:n.handleChange,value:n.values.email,className:"form-control",placeholder:"Email"}),n.errors.email?o.a.createElement("div",{className:"w-2/3 mx-auto text-xs text-red-600"},n.errors.email):null,o.a.createElement("input",{type:"password",name:"password",id:"password",onChange:n.handleChange,value:n.values.password,className:"form-control",placeholder:"Password"}),n.errors.password?o.a.createElement("div",{className:"w-2/3 mx-auto text-xs text-red-600"},n.errors.password):null,o.a.createElement("button",{type:"submit",className:"w-3/4 py-1 mx-auto mt-4 text-white bg-blue-300 rounded-sm cursor-pointer hover:bg-instablue-default"},"Login"),o.a.createElement("div",{className:"mt-4 text-center text-gray-500"},"OR"),o.a.createElement("div",{className:"flex items-center justify-center mt-5 font-medium text-blue-900 text-md"},o.a.createElement(B.a,{className:"text-xl"}),o.a.createElement(P.b,{to:"/",className:"text-center"},"Log in with Facebook")),o.a.createElement("div",{className:"mt-3 text-sm text-center text-blue-900"},o.a.createElement(P.b,{to:"/"},"Forgot Password?")))},D=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"mx-auto mt-8 border border-gray-200 card"},o.a.createElement("h1",{className:"pt-6 text-5xl text-center font-grand-hotel"},"Instagram"),o.a.createElement(q,null)),o.a.createElement("div",{className:"flex items-center justify-center mx-auto mt-3 text-sm border border-gray-200 smallcard"},o.a.createElement("span",{className:"font-light "},"Don't have an account?"),o.a.createElement(P.b,{to:"/signup",className:"ml-2 text-blue-900"},"Signup")))},H=Object(g.b)("/api/users",function(){var e=Object(p.a)(d.a.mark(function e(t){var a,n,r,l,o,c,s;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},n=t.name,r=t.email,l=t.password,o=JSON.stringify({name:n,email:r,password:l}),e.next=5,h.a.post("/api/users",o,a);case 5:return c=e.sent,s={msg:c.data.message,values:t},e.abrupt("return",s);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),$=Object(g.c)({name:"users",initialState:{isAuthenticated:!1,loading:!0,user:{},message:""},reducers:{},extraReducers:Object(b.a)({},H.fulfilled,function(e,t){e.isAuthenticated=!0,e.loading=!1,e.user=t.payload.values,e.message=t.payload.msg})}).reducer,G=function(){var e=Object(i.b)(),t=Object(V.a)({initialValues:{name:"",email:"",password:""},validate:function(e){var t={};return e.name?e.name.length>15&&(t.name="Must be 15 characters or less"):t.name="Please enter a name",e.password?e.password.length>20?t.password="Must be 20 characters or less":e.password.length<6&&(t.password="Must be 6 characters or more"):t.password="Please enter a password",e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Please enter a email",t},onSubmit:function(t){e(H(t))}});return o.a.createElement("form",{onSubmit:t.handleSubmit,action:"",className:"grid grid-cols-1 mt-4"},o.a.createElement("input",{type:"email",name:"email",id:"email",onChange:t.handleChange,value:t.values.email,className:"form-control",placeholder:"Email"}),t.errors.email?o.a.createElement("div",{className:"w-2/3 mx-auto text-xs text-red-600"},t.errors.email):null,o.a.createElement("input",{type:"text",name:"name",id:"name",onChange:t.handleChange,value:t.values.name,className:"form-control",placeholder:"Name"}),t.errors.name?o.a.createElement("div",{className:"w-2/3 mx-auto text-xs text-red-600"},t.errors.name):null,o.a.createElement("input",{type:"password",name:"password",id:"password",onChange:t.handleChange,value:t.values.password,className:"form-control",placeholder:"Password"}),t.errors.password?o.a.createElement("div",{className:"w-2/3 mx-auto text-xs text-red-600"},t.errors.password):null,o.a.createElement("button",{type:"submit",className:"w-3/4 py-1 mx-auto mt-4 text-white bg-blue-300 rounded-sm cursor-pointer hover:bg-instablue-default"},"Sign Up"),o.a.createElement("span",{className:"w-3/4 mx-auto mt-4 text-xs font-medium text-center text-gray-500"},"By signing up, you agree to our"," ",o.a.createElement("strong",null," Terms , Data Policy and Cookies Policy .")))},K=function(){var e=Object(i.c)(function(e){return e.users.message});return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"mx-auto mt-8 border border-gray-200 largecard"},""!==e?o.a.createElement("div",{className:"w-full mt-2 mb-2 text-white bg-blue-500"},e):"",o.a.createElement("h1",{className:"pt-6 text-5xl text-center font-grand-hotel"},"Instagram"),o.a.createElement("h2",{className:"w-3/4 mx-auto mt-4 font-bold text-center text-gray-500 text-md"},"Sign up to see photos and videos from your friends."),o.a.createElement("div",{className:"flex items-center justify-center w-3/4 py-1 mx-auto mt-5 font-medium text-white rounded-sm bg-instablue-default text-md"},o.a.createElement(B.a,{className:"text-xl"}),o.a.createElement(P.b,{to:"/",className:"text-center"},"Log in with Facebook")),o.a.createElement("div",{className:"mt-4 text-center text-gray-500"},"OR"),o.a.createElement(G,{getMsg:function(e){console.log(e)}})),o.a.createElement("div",{className:"flex items-center justify-center mx-auto mt-3 text-sm border border-gray-200 smallcard"},o.a.createElement("span",null,"Have an account?"),o.a.createElement(P.b,{to:"/login",className:"ml-2 text-blue-900"},"Login")))},Q=a(52),X=function(){var e=Object(l.useState)([]),t=Object(f.a)(e,2),a=t[0],n=t[1],r=Object(i.b)(),c=function(){var e=Object(p.a)(d.a.mark(function e(t){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.files[0],console.log("originalFile instanceof Blob",a instanceof Blob),console.log("originalFile size ".concat(a.size/1024/1024," MB")),n(a);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),s=Object(V.a)({initialValues:{file:"",title:"",body:""},validate:function(e){var t={};return e.title||(t.title="Title is required"),e.body||(t.body="Caption is required"),0===a.length&&(t.file="Please select a pic"),t},onSubmit:function(e){Object(p.a)(d.a.mark(function t(){var n,l,o,c,s,i;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Compression started"),n={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0},t.prev=2,t.next=5,Object(Q.a)(a,n);case 5:l=t.sent,console.log("compressedFile instanceof Blob",l instanceof Blob),console.log("compressedFile size ".concat(l.size/1024/1024," MB")),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:return console.log("Compressed"),console.log(l),t.next=17,r(v(l));case 17:o=t.sent,c=o.payload.secure_url,console.log("Uploaded to Cloudinary"),s=e.title,i=e.body,r(E({title:s,body:i,link:c}));case 23:case"end":return t.stop()}},t,null,[[2,10]])}))()}});return o.a.createElement("form",{onSubmit:s.handleSubmit},o.a.createElement("h1",{className:"pt-6 text-5xl text-center font-grand-hotel"},"New Post"),o.a.createElement("div",{className:"text-center"},o.a.createElement("input",{type:"text",name:"title",id:"title",placeholder:"Enter a title",onChange:s.handleChange,value:s.values.title,className:"form-control"}),s.errors.title?o.a.createElement("div",{className:"w-2/3 mx-auto text-xs text-left text-red-600"},s.errors.title):null,o.a.createElement("input",{type:"text",name:"body",id:"body",placeholder:"Enter a caption",onChange:s.handleChange,value:s.values.body,className:"form-control"}),s.errors.body?o.a.createElement("div",{className:"w-2/3 mx-auto text-xs text-left text-red-600"},s.errors.body):null,o.a.createElement("input",{type:"file",name:"file",accept:"image/*",id:"file",onChange:c,className:"form-control"}),s.errors.file?o.a.createElement("div",{className:"w-2/3 mx-auto text-xs text-left text-red-600"},s.errors.file):null,o.a.createElement("button",{type:"submit",className:"w-3/4 py-1 mx-auto mt-4 text-white bg-blue-300 rounded-sm cursor-pointer hover:bg-instablue-default"},"Upload")))},Y=a(53),ee=a.n(Y),te=function(){return o.a.createElement("div",null,o.a.createElement("img",{src:ee.a,alt:""}))},ae=function(){var e=Object(i.b)(),t=Object(i.c)(function(e){return e.posts.loading}),a=Object(l.useRef)(null),n=Object(i.c)(function(e){return e.posts.alertMessage});console.log(t);return t?o.a.createElement("div",{className:"flex items-center justify-center h-screen "},o.a.createElement(te,null)):o.a.createElement("div",{className:"h-screen "},o.a.createElement("div",{className:"mx-auto mt-8 border border-gray-200 card"},""!==n?o.a.createElement("div",{ref:a,className:"py-4 text-center text-white bg-blue-300"},n," ",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;setTimeout(function(){null!==e.current&&(e.current.style.display="none")},t)}(a),void setTimeout(function(){e(O())},2e3)):"",o.a.createElement(X,null)))},ne=a(54),re=function(){return o.a.createElement("div",{className:"sticky bottom-0 flex items-center justify-center object-bottom w-full h-12 bg-white border-t "},o.a.createElement(P.b,{to:"/add_post",className:"text-3xl"},o.a.createElement(ne.a,null)))},le=function(e){var t=e.name,a=e.text;return o.a.createElement("div",{className:"flex items-center mx-8 my-10 mb-8 align-center"},o.a.createElement("h4",null,o.a.createElement("strong",null,t)),o.a.createElement("p",null,a))},oe=function(e){var t=Object(i.b)(),a=e.match.params.id,n=Object(i.c)(function(e){return e.comments}),r=Object(l.useState)([]),c=Object(f.a)(r,2),s=c[0],u=c[1];return Object(l.useEffect)(Object(p.a)(d.a.mark(function e(){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(L(a));case 2:n=e.sent,u(n.payload);case 4:case"end":return e.stop()}},e)})),[]),s.length>0?o.a.createElement("div",{className:"h-screen max-w-xs mx-auto "},o.a.createElement("div",{className:"border min-h-46"},n.comments.map(function(e){return o.a.createElement(le,{name:e.name,text:e.text,key:e.text})}))):o.a.createElement("div",null,"Loading...")};var ce=function(){var e;return""!==Object(i.c)(function(e){return e.auth}).token?e=!0:(e=!1,console.log("not auth")),o.a.createElement("div",{className:"mx-auto App lg:container"},o.a.createElement(Z,null),o.a.createElement(u.d,null,o.a.createElement(u.b,{exact:!0,path:"/",render:function(){return e?o.a.createElement(_,null):o.a.createElement(D,null)}}),o.a.createElement(u.b,{path:"/login",render:function(){return e?o.a.createElement(u.a,{to:"/"}):o.a.createElement(D,null)}}),o.a.createElement(u.b,{path:"/signup",component:K}),o.a.createElement(u.b,{path:"/add_post",render:function(){return e?o.a.createElement(ae,null):o.a.createElement(u.a,{to:"/login"})}}),o.a.createElement(u.b,{path:"/viewcomments/:id",component:oe})),e?o.a.createElement(re,null):"")},se=Object(g.a)({reducer:{users:$,auth:W,posts:k.reducer,comments:M.reducer},customizedMiddleware:Object(g.d)({serializableCheck:!1})});s.a.render(o.a.createElement(P.a,null,o.a.createElement(i.a,{store:se},o.a.createElement(ce,null))),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.aea8a3df.chunk.js.map